diff --git a/CMakeLists.txt b/CMakeLists.txt
index bd600b66..ceb17e9c 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -20,17 +20,8 @@ set(CMAKE_INSTALL_LIBDIR lib)
 if (DEFINED ENV{ROS_PYTHON_VERSION})
     set(Py_VERSION $ENV{ROS_PYTHON_VERSION})
 else()
-    message(WARNING "ENV ROS_PYTHON_VERSION is not set. Use default: 2")
-    set(Py_VERSION "2")
-endif()
-
-if (NOT CMAKE_VERSION VERSION_LESS "3.12")
-    find_package(Python${Py_VERSION} COMPONENTS Interpreter)
-    set(Python_EXECUTABLE "${Python${Py_VERSION}_EXECUTABLE}")
-else()
-    # find libraries with cmake modules
-    find_package(PythonInterp ${Py_VERSION} REQUIRED)
-    set(Python_EXECUTABLE "${PYTHON_EXECUTABLE}")
+    message(WARNING "ENV ROS_PYTHON_VERSION is not set. Use default: 3")
+    set(Py_VERSION "3")
 endif()
 
 message(STATUS "Python ${Py_VERSION} iterpretator: ${Python_EXECUTABLE}")

diff --git a/pymavlink/generator/CPP11/include_v2.0/msgmap.hpp b/pymavlink/generator/CPP11/include_v2.0/msgmap.hpp
index 92cf9e7a..f8fab8a1 100644
--- a/pymavlink/generator/CPP11/include_v2.0/msgmap.hpp
+++ b/pymavlink/generator/CPP11/include_v2.0/msgmap.hpp
@@ -2,7 +2,31 @@
 #pragma once
 
 #include <algorithm>
-#include <endian.h>
+#ifdef FREEBSD
+  #include <sys/endian.h>
+#elif __APPLE__
+  #include <machine/endian.h>
+
+  #include <libkern/OSByteOrder.h>
+
+  #define htobe16(x) OSSwapHostToBigInt16(x)
+  #define htole16(x) OSSwapHostToLittleInt16(x)
+  #define be16toh(x) OSSwapBigToHostInt16(x)
+  #define le16toh(x) OSSwapLittleToHostInt16(x)
+
+  #define htobe32(x) OSSwapHostToBigInt32(x)
+  #define htole32(x) OSSwapHostToLittleInt32(x)
+  #define be32toh(x) OSSwapBigToHostInt32(x)
+  #define le32toh(x) OSSwapLittleToHostInt32(x)
+
+  #define htobe64(x) OSSwapHostToBigInt64(x)
+  #define htole64(x) OSSwapHostToLittleInt64(x)
+  #define be64toh(x) OSSwapBigToHostInt64(x)
+  #define le64toh(x) OSSwapLittleToHostInt64(x)
+
+#else
+  #include <endian.h>
+#endif
 #include <type_traits>
 
 namespace mavlink {
